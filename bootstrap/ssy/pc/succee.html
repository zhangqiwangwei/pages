<style>
    .survey-content {
        display: block;
        padding: 22px;
        box-sizing: border-box;
        border-radius: 5px;
        color: #000000;
        width: 650px;
        margin: auto;
    }

    .survey-logo {
        text-align: center;
        padding: 20px 0;
    }

    .survey-step-one {
        text-align: center;
        padding: 0 20px;
    }

    .survey-step {
        display: none;
        padding: 0 20px;
        min-height: 180px;
    }

    .survey-close {
        font-size: 36px;
        float: right;
        line-height: 20px;
        cursor: pointer;
    }

    .survey-box {
        padding-bottom: 10px;
        text-align: left;
    }

    .survey-button {
        background: #000000;
        color: #ffffff;
        padding: 5px 0;
        width: 240px;
        display: inline-block;
        font-size: 16px;
        border-radius: 3px;
        border: 1px solid;
        cursor: pointer;
    }

    .survey-button:hover {
        color: #ffffff;
    }

    .survey-step .survey-check-label {
        display: inline-block;
        color: #000000;
    }

    .survey-step .radio_type {
        width: 13px;
        height: 13px;
        appearance: none;
        position: relative;
        border: none;
    }

    .survey-step .radio_type:before {
        content: '';
        width: 13px;
        height: 13px;
        border: 1px solid #000000;
        display: inline-block;
        vertical-align: text-top;
    }

    .survey-step .radio_type:checked:before {
        content: '';
        width: 13px;
        height: 13px;
        border: 1px solid #000000;
        background: #000000;
        display: inline-block;
        vertical-align: text-top;
    }

    .survey-step .radio_type:checked:after {
        content: '';
        width: 10px;
        height: 5px;
        border: 2px solid white;
        border-top: transparent;
        border-right: transparent;
        text-align: center;
        display: block;
        position: absolute;
        top: 2px;
        left: 2px;
        vertical-align: middle;
        transform: rotate(-45deg);
    }

    .survey-step .radio_type:checked + label {
        color: #000000;
    }

    .que-title {
        font-size: 16px;
        font-weight: bolder;
        margin-bottom: 10px;
    }

    .survey-check-div {
        padding: 9px 0;
    }

    .survey-submit {
        display: none;
    }

    .survey-pre, .survey-pre:hover {
        background: #ffffff;
        color: #000000;
    }

    .survey-propress {
        position: relative;
        background: #eeeeee;
        width: 100%;
    }

    .survey-range {
        width: 0%;
        height: 4px;
        background: #000000;
        top: 0;
        left: 0;
    }

    .survey-num {
        position: absolute;
        bottom: 2px;
        left: 0;
        transform: translateX(-50%);
    }

    .survey-check-div > textarea {
        resize: none;
    }

    .survey-success {
        display: none;
    }

    .survey-success-text {
        font-size: 30px;
        font-weight: bolder;
        padding: 10px 0;
    }

    .survey-copy-code {
        width: 325px;
        margin-bottom: 40px;
    }

    .survey-action {
        margin: 0 25px;
        border-top: 1px solid #eeeeee;
    }

    .survey-copy-code-success {
        opacity: 0;
        min-width: 350px;
        text-align: center;
        box-sizing: border-box;
        border-radius: 4px;
        border: 1px solid #e1f3d8;
        color: #67c23a;
        position: fixed;
        left: 50%;
        top: 30%;
        transform: translateX(-50%);
        background-color: #f0f9eb;
        transition: opacity .3s, transform .4s, top .4s;
        padding: 15px 15px 15px 20px;
        z-index: 9999;
        pointer-events: none;
    }
    .opacity1 {
        opacity: 1;
    }
    .survey-success-code {
        height: 52px;
        line-height: 52px;
        margin: 15px 0;
        font-size: 24px;
        background: url(//images.jeulia.com/promotion/en/cms/survey/4.jpg) no-repeat center;
    }
    .survey-flex-wrap {
        display: flex;
        justify-content: flex-start;
        align-items: flex-start;
        flex-wrap: wrap;
    }

    .flex-block-4 > .survey-check-div {
        width: 25%;
    }

    .flex-block-3 > .survey-check-div {
        width: 33.3%;
    }

    .flex-block-2 > .survey-check-div {
        width: 50%;
    }
    .flex-block-1 > .survey-check-div {
        width: 100%;
    }
    .error-null{
        color: #ff0000;
        font-size: 12px;
    }
</style>
<div style="border-top: 1px solid #eeeeee;margin-top: 30px;">
    <div class="survey-copy-code-success">Copied Successfully</div>
    <div class="survey-content">
        <div class="survey-close">×</div>
        <div class="survey-logo"><img src="//images.jeulia.com/promotion/en/icons/logo/nav-logo.png" alt="logo" style="width: 120px;"></div>
        <div class="survey-step-one">
            <div style="font-size: 23px;font-weight: bolder;">Hello! Thank you for opening this survey.</div>
            <div style="padding: 20px 0;line-height: 25px;">
                It only takes a couple of minutes and will help Jeulia get a
                better idea of your jewelry purchasing habits and wearing preferences.
            </div>
            <div style="font-size: 18px;">You will <strong>get a discount</strong> of $ after finishing this survey</div>
        </div>
        <form class="survey-form">
            <input type="hidden" id="survey_id" name="survey[survey_id]" value="">
            <div class="survey-box">
                <div class="survey-step" require="0" data-name="">
                    <input type="hidden" name="survey[questions][0][question_id]" value="18">
                    <div class="question-context">
                        <div class="que-title">1.Would you mind selecting your age range?</div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-3">
                            <div class="survey-check-div"><label class="survey-check-label">
                                <input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="53">18-24</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="54">25-34</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="55">35-44</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="56">45-54</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="57">55-64</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][0][answer_id]" class="radio_type" value="58">65+</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0"><input type="hidden" name="survey[questions][1][question_id]" value="19">
                    <div class="question-context">
                        <div class="que-title">2.How much do you generally spend on each daily-wear jewelry?</div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-3">
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][1][answer_id]" class="radio_type" value="59">Less than
                                $50</label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][1][answer_id]" class="radio_type" value="60">$50-$100</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][1][answer_id]" class="radio_type" value="61">$100-$200</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][1][answer_id]" class="radio_type" value="62">$200-$500</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][1][answer_id]" class="radio_type" value="63">More than
                                $500</label></div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0" data-name=""><input type="hidden" name="survey[questions][2][question_id]" value="20">
                    <div class="question-context">
                        <div class="que-title">3.On what occasion would you buy our Hug Me® jewelry?</div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-2">
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][2][answer_id]" class="radio_type" value="64">Engagement</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][2][answer_id]" class="radio_type" value="65">Special
                                occasion</label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][2][answer_id]" class="radio_type" value="66">Everyday
                                casual look</label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][2][answer_id]" class="radio_type" value="67">For gifts</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][2][answer_id]" class="radio_type" value="68">To go with
                                a new outfit</label></div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0" data-name=""><input type="hidden" name="survey[questions][3][question_id]" value="21">
                    <div class="question-context">
                        <div class="que-title">4.Why do you like our Hug Me® Collection?</div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-1">
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][3][answer_id]" class="radio_type" value="69">Like cute
                                animals/images</label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][3][answer_id]" class="radio_type" value="70">Like the
                                form of hug to express love</label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][3][answer_id]" class="radio_type" value="71">Unique. I
                                don't see it at other jewelers</label></div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0" data-name=""><input type="hidden" name="survey[questions][4][question_id]" value="22">
                    <div class="question-context">
                        <div class="que-title">5.Which of the following stone shapes do you like in our Hug Me®
                            Collection? （Multiple-choice）
                        </div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-4">
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][0]" class="radio_type" value="72">Round</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][1]" class="radio_type" value="73">Princess</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][2]" class="radio_type" value="74">Heart</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][3]" class="radio_type" value="75">Oval</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][4]" class="radio_type" value="76">Cushion</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][5]" class="radio_type" value="77">Emerald</label>
                            </div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="checkbox" name="survey[questions][4][answer_id][6]" class="radio_type" value="78">Pear</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0" data-name=""><input type="hidden" name="survey[questions][5][question_id]" value="23">
                    <div class="question-context">
                        <div class="que-title">6.Which form of hug do you perfer in our Hug Me® Collection?</div>
                        <div class="pl-4 mb-4 survey-flex-wrap flex-block-3">
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][5][answer_id]" class="radio_type" value="79">One
                                image/animal to hug the stone <br><img src="//images.jeulia.com/promotion/en/cms/survey/1.jpg"></label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][5][answer_id]" class="radio_type" value="80">Two
                                images/animals to hug the stone<br><img src="//images.jeulia.com/promotion/en/cms/survey/2.jpg"></label></div>
                            <div class="survey-check-div"><label class="survey-check-label"><input type="radio" name="survey[questions][5][answer_id]" class="radio_type" value="81">Image/animal
                                without stone<br><img src="//images.jeulia.com/promotion/en/cms/survey/3.jpg"></label></div>
                        </div>
                    </div>
                </div>
                <div class="survey-step" require="0" data-name=""><input type="hidden" name="survey[questions][6][question_id]" value="24">
                    <div class="question-context">
                        <div class="que-title">7.What other images/animals do you like to see in our Hug Me®
                            Collection?
                        </div>
                        <div class="pl-4 mb-4">
                            <div class="survey-check-div"><textarea name="survey[questions][6][other_text]"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="survey-success" style="text-align: center;">
            <div style="font-size: 18px;">Thank you for taking the time to answer this survey!</div>
            <div style="" class="survey-success-text">You will get a discount of $15</div>
            <div style="color: #777777;">Don't forget to use your discount code at checkout!</div>
            <div>
                <div class="survey-success-code">CODE:SUR15QY69Q2</div>
            </div>
            <div><a class="survey-button survey-copy-code">CLICK TO COPY THE CODE</a></div>
        </div>

        <div class="survey-action">
            <div style="text-align: center;padding: 25px 0;"><a class="survey-button start-survey" style="">CONTINUE</a>
            </div>
            <div style="text-align: center;display: none;" class="survey-pre-next">
                <div class="survey-propress">
                    <div class="survey-range"></div>
                    <div class="survey-num">1/7</div>
                </div>
                <div style="display: flex;justify-content: space-between;padding: 25px 0;">
                    <a class="survey-button survey-pre">Previous</a>
                    <a class="survey-button survey-next">Next</a>
                    <a class="survey-button survey-submit">Submit</a>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    require(['jquery','https://cdnjs.cloudflare.com/ajax/libs/qs/6.9.6/qs.min.js'], function ($,qs) {
        var survey_id = 9;
        var index = 0;
        var expiration = 1 * 24 * 3600 * 1000;
        var data = {"id":9,"title":"hug me","status":1,"start_time":null,"end_time":null,"created_at":"2021-02-03 07:03:14","updated_at":"2021-02-03 07:03:14","questions":[{"id":18,"survey_id":9,"title":"Would you mind selecting your age range?","type":"radio","is_required":1,"position":0,"answers":[{"id":53,"question_id":18,"answer":"18-24","position":0},{"id":54,"question_id":18,"answer":"25-34","position":1},{"id":55,"question_id":18,"answer":"35-44","position":2},{"id":56,"question_id":18,"answer":"45-54","position":3},{"id":57,"question_id":18,"answer":"55-64","position":4},{"id":58,"question_id":18,"answer":"65+","position":5}]},{"id":19,"survey_id":9,"title":"How much do you generally spend on each daily-wear jewelry?","type":"radio","is_required":1,"position":1,"answers":[{"id":59,"question_id":19,"answer":"Less than $50","position":0},{"id":60,"question_id":19,"answer":"$50-$100","position":1},{"id":61,"question_id":19,"answer":"$100-$200","position":2},{"id":62,"question_id":19,"answer":"$200-$500","position":3},{"id":63,"question_id":19,"answer":"More than $500","position":4}]},{"id":20,"survey_id":9,"title":"On what occasion would you buy our Hug Me\u00ae jewelry?","type":"radio","is_required":1,"position":2,"answers":[{"id":64,"question_id":20,"answer":"Engagement","position":0},{"id":65,"question_id":20,"answer":"Special occasion","position":1},{"id":66,"question_id":20,"answer":"Everyday casual look","position":2},{"id":67,"question_id":20,"answer":"For gifts","position":3},{"id":68,"question_id":20,"answer":"To go with a new outfit","position":4}]},{"id":21,"survey_id":9,"title":"Why do you like our Hug Me\u00ae Collection?","type":"radio","is_required":1,"position":3,"answers":[{"id":69,"question_id":21,"answer":"Like cute animals\/images","position":0},{"id":70,"question_id":21,"answer":"Like the form of hug to express love","position":1},{"id":71,"question_id":21,"answer":"Unique. I don't see it at other jewelers","position":2}]},{"id":22,"survey_id":9,"title":"Which of the following stone shapes do you like in our Hug Me\u00ae Collection? \uff08Multiple-choice\uff09","type":"checkbox","is_required":1,"position":4,"answers":[{"id":72,"question_id":22,"answer":"Round","position":0},{"id":73,"question_id":22,"answer":"Princess","position":1},{"id":74,"question_id":22,"answer":"Heart","position":2},{"id":75,"question_id":22,"answer":"Oval","position":3},{"id":76,"question_id":22,"answer":"Cushion","position":4},{"id":77,"question_id":22,"answer":"Emerald","position":5},{"id":78,"question_id":22,"answer":"Pear","position":6}]},{"id":23,"survey_id":9,"title":"Which form of hug do you perfer in our Hug Me\u00ae Collection?","type":"radio","is_required":1,"position":5,"answers":[{"id":79,"question_id":23,"answer":"One image\/animal to hug the stone","position":0},{"id":80,"question_id":23,"answer":"Two images\/animals to hug the stone","position":1},{"id":81,"question_id":23,"answer":"Image\/animal without stone","position":2}]},{"id":24,"survey_id":9,"title":"What other images\/animals do you like to see in our Hug Me\u00ae Collection?","type":"text","is_required":1,"position":6,"answers":[]}]};
        var questions = data.questions;
        var qustionsNumber = questions.length;
        $(".survey-form #survey_id").val(survey_id);
        var oldTime = +localStorage.getItem("survey-" + survey_id);
        if (oldTime && (new Date().getTime() - oldTime) < expiration) {
            showCode();
        }
        $(".survey-content").show();
        $(".survey-submit").on("click", function () {
            if (!checkNull()) {
                return
            }
            var formData = new FormData($(".survey-form")[0]);
            var str = "";
            formData.forEach(function(value, key){
                str += key+"="+value+"&";
            });
            var pData = qs.parse(str).survey;
            $('body').loader('show');
            $.ajax({
                url: "https://survey.bizseas.com/api/survey/" + survey_id,
                type: 'POST',
                data: pData,
                global: false,
                success: function (result) {
                    $('body').loader('hide');
                    localStorage.setItem("survey-" + survey_id, new Date().getTime());
                    showCode();
                }
            });
        });

        function changeStep(index) {
            var propress = ((index + 1) / qustionsNumber * 100).toFixed(1) + "%";
            $(".survey-step").eq(index).fadeIn();
            $(".survey-range").css("width", propress);
            $(".survey-num").text((index + 1) + "/" + qustionsNumber).css("left", propress)
        }

        function copyToClipboard(content) {
            var aux = document.createElement("input");
            aux.setAttribute("value", content);
            document.body.appendChild(aux);
            aux.select();
            aux.setSelectionRange(0, 20);
            document.execCommand("copy");
            document.body.removeChild(aux);
        }

        function showCode() {
            $(".survey-form").hide();
            $(".survey-action").hide();
            $(".survey-step-one").hide();
            $(".survey-success").show();
        }

        $(".start-survey").on("click", function () {
            $(".survey-step-one").hide();
            $(this).parent().hide();
            changeStep(index);
            $(".survey-pre-next").show();
        });

        $(".survey-pre").on("click", function () {
            if (index > 0) {
                index--;
                $(".survey-step").hide();
                changeStep(index);
                if (index < qustionsNumber - 1) {
                    $(".survey-next").show();
                    $(".survey-submit").hide();
                }
            }
        });

        function checkNull() {
            if (questions[index]["is_required"] == 1) {
                var val = "";
                var ValDom = $(".survey-step").eq(index).find(".question-context");
                if (questions[index]["type"] === "text") {
                    val = ValDom.find("textarea").val();
                } else {
                    val = ValDom.find("input:" + questions[index]["type"] + ":checked").val();
                }
                if (!val) {
                    if($(".error-null").length === 0){
                        ValDom.append("<div class='error-null'>Please choose an answer</div>")
                    }
                    return false;
                } else {
                    $(".error-null").remove();
                    return true;
                }
            } else {
                $(".error-null").remove();
                return true;
            }
        }

        $(".survey-next").on("click", function () {
            if (index < qustionsNumber) {
                if (!checkNull()) {
                    return
                }
                index++;
                $(".survey-step").hide();
                changeStep(index);
                if (index == qustionsNumber - 1) {
                    $(".survey-next").hide();
                    $(".survey-submit").show();
                }
            }
        });
        $(".survey-close").on("click", function () {
           $(".survey-content").fadeOut();
        });
        $(".survey-copy-code").on("click", function () {
            copyToClipboard("SUR15QY69Q2");
            $(".survey-copy-code-success").addClass("opacity1");
            setTimeout(function () {
                $(".survey-copy-code-success").removeClass("opacity1");
            }, 1000);
        });
    })
</script>